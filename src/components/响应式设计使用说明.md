# 响应式设计组合式函数使用说明

## 概述

`useResponsiveDesign` 是一个专门为手机设备和各种屏幕尺寸优化的 Vue 3 组合式函数，提供了完整的响应式设计解决方案。

## 文件结构

```
src/components/
├── useResponsiveDesign.ts          # 响应式设计组合式函数
├── ResponsiveDesignExample.vue     # 使用示例组件
└── 响应式设计使用说明.md           # 本文档
```

## 主要功能

### 1. 设备类型检测

- **Desktop（桌面）**: 屏幕宽度 > 1024px
- **Tablet（平板）**: 屏幕宽度 768px - 1024px
- **Mobile（手机）**: 屏幕宽度 480px - 768px
- **Small Mobile（小屏手机）**: 屏幕宽度 ≤ 480px

### 2. 屏幕方向检测

- **Portrait（竖屏）**: 高度 > 宽度
- **Landscape（横屏）**: 宽度 > 高度
- **Low Landscape（低横屏）**: 横屏且高度 ≤ 500px

### 3. 触摸设备检测

自动检测设备是否支持触摸操作，用于优化交互体验。

### 4. 响应式尺寸配置

根据设备类型自动提供合适的尺寸配置：

- 头部高度和内边距
- Logo 尺寸
- 回到顶部按钮尺寸和位置
- 图标字体大小
- 间距配置

## 基本使用方法

### 1. 在组件中导入和使用

```vue
<script setup>
import { useResponsiveDesign } from "@/components/useResponsiveDesign";

// 获取响应式设计功能
const {
  // 基础数据
  windowWidth,
  windowHeight,
  isTouchDevice,

  // 设备类型判断
  deviceType,
  isDesktop,
  isTablet,
  isMobile,
  isSmallMobile,
  isMobileDevice,

  // 屏幕方向判断
  screenOrientation,
  isPortrait,
  isLandscape,
  isLowLandscape,

  // 工具方法
  getResponsiveClasses,
  getResponsiveSizes,
} = useResponsiveDesign();
</script>
```

### 2. 使用响应式 CSS 类名

```vue
<template>
  <div :class="getResponsiveClasses()" class="my-component">
    <!-- 组件内容 -->
  </div>
</template>

<style scoped>
/* 根据设备类型应用不同样式 */
.device-mobile .my-component {
  padding: 10px;
}

.device-small-mobile .my-component {
  padding: 5px;
}

.touch-device .my-component {
  /* 触摸设备特定样式 */
}

.orientation-landscape.low-landscape .my-component {
  /* 低横屏模式样式 */
}
</style>
```

### 3. 使用响应式尺寸配置

```vue
<script setup>
import { computed } from "vue";
import { useResponsiveDesign } from "@/components/useResponsiveDesign";

const { getResponsiveSizes } = useResponsiveDesign();

// 获取当前设备的尺寸配置
const sizes = computed(() => getResponsiveSizes());

// 应用到样式中
const headerStyle = computed(() => ({
  height: sizes.value.header.height,
  padding: sizes.value.header.padding,
}));
</script>

<template>
  <header :style="headerStyle">
    <!-- 头部内容 -->
  </header>
</template>
```

## 在现有 App.vue 中集成

如果您想在现有的 `App.vue` 中使用这个响应式设计功能，可以这样做：

```vue
<script setup>
import { useResponsiveDesign } from "@/components/useResponsiveDesign";
import { useScrollHideHeader } from "@/components/useScrollHideHeader";

// 组合两个功能
const { getResponsiveClasses, getResponsiveSizes, isMobileDevice } =
  useResponsiveDesign();
const { isHeaderVisible, showBackTop, scrollToTop } = useScrollHideHeader();

// 获取响应式尺寸
const responsiveSizes = computed(() => getResponsiveSizes());
</script>

<template>
  <div :class="getResponsiveClasses()" class="app-root">
    <!-- 其他组件内容 -->

    <!-- 动态调整回到顶部按钮样式 -->
    <el-icon
      v-if="showBackTop"
      class="back-top"
      :style="{
        width: responsiveSizes.backTop.size,
        height: responsiveSizes.backTop.size,
        fontSize: responsiveSizes.backTop.fontSize,
        right: responsiveSizes.backTop.right,
        bottom: responsiveSizes.backTop.bottom,
      }"
      @click="scrollToTop"
    >
      <CaretTop />
    </el-icon>
  </div>
</template>
```

## 断点配置

可以通过导入断点常量来使用预定义的断点：

```javascript
import {
  BREAKPOINTS,
  DeviceType,
  ScreenOrientation,
} from "@/components/useResponsiveDesign";

console.log(BREAKPOINTS.MOBILE); // 768
console.log(DeviceType.MOBILE); // 'mobile'
console.log(ScreenOrientation.LANDSCAPE); // 'landscape'
```

## 实用技巧

### 1. 条件渲染

```vue
<template>
  <div>
    <!-- 仅在桌面端显示 -->
    <DesktopMenu v-if="isDesktop" />

    <!-- 仅在移动端显示 -->
    <MobileMenu v-if="isMobileDevice" />

    <!-- 横屏时显示不同内容 -->
    <LandscapeLayout v-if="isLandscape" />
    <PortraitLayout v-else />
  </div>
</template>
```

### 2. 动态样式计算

```vue
<script setup>
const dynamicStyle = computed(() => {
  const base = {
    fontSize: "16px",
    padding: "10px",
  };

  if (isSmallMobile.value) {
    base.fontSize = "14px";
    base.padding = "8px";
  } else if (isMobile.value) {
    base.fontSize = "15px";
    base.padding = "9px";
  }

  return base;
});
</script>
```

### 3. 性能优化

组合式函数已经内置了以下性能优化：

- **防抖处理**: resize 事件使用 100ms 防抖
- **被动监听器**: 滚动事件使用被动监听器
- **计算属性缓存**: 所有判断都使用 computed，只在依赖变化时重新计算

## 最佳实践

1. **优先使用 CSS 媒体查询**: 对于静态样式，仍建议使用 CSS 媒体查询
2. **组合式函数用于动态逻辑**: 当需要根据设备类型执行不同 JavaScript 逻辑时使用
3. **避免过度使用**: 不要为每个小的样式调整都使用 JavaScript，保持性能
4. **测试多设备**: 在不同设备和方向上测试响应式行为

## 示例组件

可以查看 `ResponsiveDesignExample.vue` 文件来了解完整的使用示例，该组件展示了：

- 实时设备信息显示
- 响应式配置展示
- 动态样式应用
- CSS 类名生成
- 响应式元素演示

## 扩展功能

如需添加新的断点或设备类型，可以修改 `useResponsiveDesign.ts` 中的：

- `BREAKPOINTS` 常量
- `DeviceType` 枚举
- `deviceType` 计算属性的逻辑
- `getResponsiveSizes` 方法的配置

这样可以确保整个应用都能使用新的响应式配置。
